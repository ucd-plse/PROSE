[machine]
project_root = <REPLACE_WITH_PATH_TO_REPO_ROOT>
src_search_paths =
  ${project_root}/src/MOM6/config_src/dynamic
  ${project_root}/src/MOM6/src
  ${project_root}/src/FMS
  ; ${project_root}/src/MOM6/pkg/CVMix-src/src
  
[target]
src_files = ${machine:project_root}/src/MOM6/src/core/MOM_continuity_PPM.F90
search_patterns =
  ^::MOM_continuity_PPM::.+

; src_files =
;   ${machine:project_root}/src/MOM6/src/tracer/MOM_neutral_diffusion.F90
;   ; ${machine:project_root}/src/MOM6/src/parameterizations/vertical/MOM_CVMix_KPP.F90
;   ; ${machine:project_root}/src/MOM6/pkg/CVMix-src/src/shared/cvmix_kpp.F90
; search_patterns =
;   ^::MOM_neutral_diffusion::.+
;   ; ^::MOM_CVMix_KPP::.+
;   ; ^::cvmix_kpp::.+

additional_plugin_flags =
  -Duse_libMPI
  -Duse_netCDF
  -DSPMD
  -Duse_LARGEFILE 
  -DOVERLOAD_R8
  -DOVERLOAD_R4

[build]
cmd = ./scripts/build_MOM6_intel_gptl.sh
working_dir = ${machine:project_root}

[run]
cmd = ./run_script.sh
working_dir = ./

[eval]
cmd = python eval_MOM6.py
working_dir = ./
pass_log_path = True

[Derecho]
env_script = ${machine:project_root}/scripts/set_env.sh 
copy_ignore =
  *_velocity_truncations